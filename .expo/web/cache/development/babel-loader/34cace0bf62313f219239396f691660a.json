{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Toppr\\\\Python Basics\\\\class-58_updated\\\\components\\\\Media.js\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Picker } from '@react-native-picker/picker';\nimport * as ImagePicker from 'expo-image-picker';\nimport BasicButton from \"./BasicButton\";\nimport firebase from 'firebase';\nimport storage from \"./FirebaseConfig\";\nexport default function Media() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      image = _useState2[0],\n      setImage = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isUploading = _useState4[0],\n      setIsUploading = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      percentUploaded = _useState6[0],\n      setPercentUploaded = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      quizName = _useState8[0],\n      setQuizName = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      quizType = _useState10[0],\n      setQuizType = _useState10[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$ImagePicker$re, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(Platform.OS !== 'web')) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n            case 3:\n              _await$ImagePicker$re = _context.sent;\n              status = _await$ImagePicker$re.status;\n\n              if (status !== 'granted') {\n                alert('Sorry, we need camera roll permissions to make this work!');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  function handlePickImgBtnClick() {\n    var result;\n    return _regeneratorRuntime.async(function handlePickImgBtnClick$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              setImage(result.uri);\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function uploadImage(uri) {\n    var timeStamp, imageName, response, blob, storageRef, resp;\n    return _regeneratorRuntime.async(function uploadImage$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            timeStamp = Math.floor(Date.now() / 1000);\n            imageName = timeStamp + \".jpg\";\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(fetch(uri));\n\n          case 4:\n            response = _context3.sent;\n            _context3.next = 7;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 7:\n            blob = _context3.sent;\n            storageRef = storage.ref().child(\"image/\" + imageName);\n            resp = storageRef.put(blob);\n            resp.on(firebase.storage.TaskEvent.STATE_CHANGED, function (snapshot) {\n              var percent = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n              console.log(\"percent\", percent);\n              setPercentUploaded(Math.floor(percent) + \" %\");\n            }, function (error) {\n              console.log(\"image upload error: \", error.message);\n              setPercentUploaded(\"\");\n            }, function () {\n              storageRef.getDownloadURL().then(function (downloadUrl) {\n                setImage(downloadUrl);\n                console.log(\"File available at:\", downloadUrl);\n              });\n            });\n            return _context3.abrupt(\"return\", resp);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function handleUploadImageBtnClick() {\n    console.log(\"Upload Image btn pressed\", image);\n\n    if (image) {\n      setImage(\"\");\n      setIsUploading(true);\n      uploadImage(image).then(function () {\n        setIsUploading(false);\n        console.log(\"Successful!\");\n      }).catch(function (error) {\n        console.log(\"Fail to upload Image\", error);\n        setIsUploading(false);\n      });\n    }\n  }\n\n  return React.createElement(ScrollView, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"Media Management\"), React.createElement(View, {\n    style: styles.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, \"Quiz Name\"), React.createElement(TextInput, {\n    style: styles.inputField,\n    placeholder: \"Enter your name\",\n    value: quizName,\n    onChangeText: function onChangeText(name) {\n      return setQuizName(name);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: styles.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \"Quiz Type\"), React.createElement(Picker, {\n    style: styles.inputField,\n    selectedValue: quizType,\n    onValueChange: function onValueChange(quizType, itemIndex) {\n      return setQuizType(quizType);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, React.createElement(Picker.Item, {\n    label: \"\",\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Maths Quiz\",\n    value: \"Maths Quiz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Science Quiz\",\n    value: \"Science Quiz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Sports Quiz\",\n    value: \"Sports Quiz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"English  Quiz\",\n    value: \"English Quiz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Hindi Quiz\",\n    value: \"Hindi Quiz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Technology Quiz\",\n    value: \"Technology Quiz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Arts Quiz\",\n    value: \"Arts Quiz\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  })), React.createElement(View, {\n    style: styles.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }), React.createElement(BasicButton, {\n    text: \"Pick Image\",\n    onPress: handlePickImgBtnClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: styles.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }), isUploading ? React.createElement(React.Fragment, null, React.createElement(ActivityIndicator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 18\n    }\n  }), React.createElement(Text, {\n    style: styles.percent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 18\n    }\n  }, percentUploaded), React.createElement(View, {\n    style: styles.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 18\n    }\n  })) : null, image ? React.createElement(React.Fragment, null, React.createElement(Image, {\n    source: {\n      uri: image\n    },\n    style: styles.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }), React.createElement(View, {\n    style: styles.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  })) : null, React.createElement(BasicButton, {\n    text: \"Upload Image\",\n    onPress: handleUploadImageBtnClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#fff',\n    marginTop: 60,\n    paddingHorizontal: 30\n  },\n  title: {\n    fontWeight: '500',\n    fontSize: 30,\n    letterSpacing: 0.1,\n    textAlign: \"center\"\n  },\n  label: {\n    fontSize: 16,\n    lineHeight: 18,\n    color: '#666666',\n    marginBottom: 3\n  },\n  inputField: {\n    fontSize: 14,\n    borderWidth: 0,\n    borderBottomWidth: 1,\n    borderBottomColor: '#BFBFBF',\n    paddingVertical: 6\n  },\n  divider: {\n    paddingVertical: 8\n  },\n  image: {\n    alignSelf: \"center\",\n    width: \"100%\",\n    height: 200\n  },\n  percent: {\n    textAlign: \"center\"\n  }\n});","map":{"version":3,"sources":["D:/Toppr/Python Basics/class-58_updated/components/Media.js"],"names":["React","useState","useEffect","Picker","ImagePicker","BasicButton","firebase","storage","Media","image","setImage","isUploading","setIsUploading","percentUploaded","setPercentUploaded","quizName","setQuizName","quizType","setQuizType","Platform","OS","requestCameraRollPermissionsAsync","status","alert","handlePickImgBtnClick","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","quality","result","cancelled","uri","uploadImage","timeStamp","Math","floor","Date","now","imageName","fetch","response","blob","storageRef","ref","child","resp","put","on","TaskEvent","STATE_CHANGED","snapshot","percent","bytesTransferred","totalBytes","console","log","error","message","getDownloadURL","then","downloadUrl","handleUploadImageBtnClick","catch","styles","container","title","divider","label","inputField","name","itemIndex","StyleSheet","create","backgroundColor","marginTop","paddingHorizontal","fontWeight","fontSize","letterSpacing","textAlign","lineHeight","color","marginBottom","borderWidth","borderBottomWidth","borderBottomColor","paddingVertical","alignSelf","width","height"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;;;;;AAEA,SAASC,MAAT,QAAuB,6BAAvB;AACA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;AACA,OAAOC,WAAP;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,OAAP;AAEA,eAAe,SAASC,KAAT,GAAiB;AAAA,kBACFP,QAAQ,CAAC,IAAD,CADN;AAAA;AAAA,MACrBQ,KADqB;AAAA,MACdC,QADc;;AAAA,mBAEUT,QAAQ,CAAC,KAAD,CAFlB;AAAA;AAAA,MAErBU,WAFqB;AAAA,MAERC,cAFQ;;AAAA,mBAGkBX,QAAQ,CAAC,EAAD,CAH1B;AAAA;AAAA,MAGrBY,eAHqB;AAAA,MAGJC,kBAHI;;AAAA,mBAIIb,QAAQ,CAAC,EAAD,CAJZ;AAAA;AAAA,MAIrBc,QAJqB;AAAA,MAIXC,WAJW;;AAAA,mBAKIf,QAAQ,CAAC,EAAD,CALZ;AAAA;AAAA,MAKrBgB,QALqB;AAAA,MAKXC,WALW;;AAQ5BhB,EAAAA,SAAS,CAAC,YAAM;AAEZ,KAAC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBACOiB,QAAQ,CAACC,EAAT,KAAgB,KADvB;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAEgChB,WAAW,CAACiB,iCAAZ,EAFhC;;AAAA;AAAA;AAEeC,cAAAA,MAFf,yBAEeA,MAFf;;AAGO,kBAAIA,MAAM,KAAK,SAAf,EAA0B;AACtBC,gBAAAA,KAAK,CAAC,2DAAD,CAAL;AACH;;AALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAQH,GAVQ,EAUN,EAVM,CAAT;;AAaA,WAAeC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACuBpB,WAAW,CAACqB,uBAAZ,CAAoC;AACnDC,cAAAA,UAAU,EAAEtB,WAAW,CAACuB,gBAAZ,CAA6BC,GADU;AAEnDC,cAAAA,OAAO,EAAE;AAF0C,aAApC,CADvB;;AAAA;AACQC,YAAAA,MADR;;AAMI,gBAAI,CAACA,MAAM,CAACC,SAAZ,EAAuB;AACnBrB,cAAAA,QAAQ,CAACoB,MAAM,CAACE,GAAR,CAAR;AACH;;AARL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYH,WAAeC,WAAf,CAA2BD,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACSE,YAAAA,SADT,GACqBC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACC,GAAL,KAAa,IAAxB,CADrB;AAESC,YAAAA,SAFT,GAEqBL,SAAS,GAAG,MAFjC;AAAA;AAAA,6CAI0BM,KAAK,CAACR,GAAD,CAJ/B;;AAAA;AAISS,YAAAA,QAJT;AAAA;AAAA,6CAKsBA,QAAQ,CAACC,IAAT,EALtB;;AAAA;AAKSA,YAAAA,IALT;AAQSC,YAAAA,UART,GAQsBpC,OAAO,CAACqC,GAAR,GAAcC,KAAd,CAAoB,WAAWN,SAA/B,CARtB;AASSO,YAAAA,IATT,GASgBH,UAAU,CAACI,GAAX,CAAeL,IAAf,CAThB;AAUGI,YAAAA,IAAI,CAACE,EAAL,CACI1C,QAAQ,CAACC,OAAT,CAAiB0C,SAAjB,CAA2BC,aAD/B,EAEI,UAAAC,QAAQ,EAAI;AACR,kBAAMC,OAAO,GAAKD,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAArE;AACAC,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBJ,OAAvB;AACAtC,cAAAA,kBAAkB,CAACqB,IAAI,CAACC,KAAL,CAAWgB,OAAX,IAAsB,IAAvB,CAAlB;AACH,aANL,EAOI,UAAAK,KAAK,EAAI;AACLF,cAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCC,KAAK,CAACC,OAA1C;AACA5C,cAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACH,aAVL,EAWI,YAAM;AACF6B,cAAAA,UAAU,CAACgB,cAAX,GACKC,IADL,CACU,UAACC,WAAD,EAAiB;AACnBnD,gBAAAA,QAAQ,CAACmD,WAAD,CAAR;AACAN,gBAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCK,WAAlC;AACH,eAJL;AAKH,aAjBL;AAVH,8CA6BMf,IA7BN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkCG,WAASgB,yBAAT,GAAqC;AACjCP,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwC/C,KAAxC;;AAEA,QAAIA,KAAJ,EAAW;AACPC,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAE,MAAAA,cAAc,CAAC,IAAD,CAAd;AAGAqB,MAAAA,WAAW,CAACxB,KAAD,CAAX,CACKmD,IADL,CACU,YAAM;AACRhD,QAAAA,cAAc,CAAC,KAAD,CAAd;AACA2C,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACH,OAJL,EAKKO,KALL,CAKW,UAACN,KAAD,EAAW;AACdF,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCC,KAApC;AACA7C,QAAAA,cAAc,CAAC,KAAD,CAAd;AACH,OARL;AASH;AACJ;;AAID,SACI,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAEoD,MAAM,CAACC,SAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAED,MAAM,CAACE,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEF,MAAM,CAACG,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAII,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEH,MAAM,CAACI,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJJ,EAKI,oBAAC,SAAD;AACI,IAAA,KAAK,EAAEJ,MAAM,CAACK,UADlB;AAEI,IAAA,WAAW,EAAC,iBAFhB;AAGI,IAAA,KAAK,EAAEtD,QAHX;AAII,IAAA,YAAY,EAAE,sBAACuD,IAAD;AAAA,aAAUtD,WAAW,CAACsD,IAAD,CAArB;AAAA,KAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,EAWI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEN,MAAM,CAACG,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,EAaI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEH,MAAM,CAACI,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAbJ,EAcI,oBAAC,MAAD;AACI,IAAA,KAAK,EAAEJ,MAAM,CAACK,UADlB;AAEI,IAAA,aAAa,EAAEpD,QAFnB;AAGI,IAAA,aAAa,EAAE,uBAACA,QAAD,EAAWsD,SAAX;AAAA,aAAyBrD,WAAW,CAACD,QAAD,CAApC;AAAA,KAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,EAAnB;AAAsB,IAAA,KAAK,EAAC,EAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,EAMI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,YAAnB;AAAgC,IAAA,KAAK,EAAC,YAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,EAOI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,cAAnB;AAAkC,IAAA,KAAK,EAAC,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,EAQI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,aAAnB;AAAiC,IAAA,KAAK,EAAC,aAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,EASI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,eAAnB;AAAmC,IAAA,KAAK,EAAC,cAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATJ,EAUI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,YAAnB;AAAgC,IAAA,KAAK,EAAC,YAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,EAWI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,iBAAnB;AAAqC,IAAA,KAAK,EAAC,iBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,EAYI,oBAAC,MAAD,CAAQ,IAAR;AAAa,IAAA,KAAK,EAAC,WAAnB;AAA+B,IAAA,KAAK,EAAC,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,CAdJ,EA4BI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE+C,MAAM,CAACG,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5BJ,EA8BI,oBAAC,WAAD;AACI,IAAA,IAAI,EAAC,YADT;AAEI,IAAA,OAAO,EAAE3C,qBAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA9BJ,EAkCI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEwC,MAAM,CAACG,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlCJ,EAqCIxD,WAAW,GACV,0CACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEqD,MAAM,CAACZ,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8BvC,eAA9B,CAFJ,EAGI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEmD,MAAM,CAACG,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADU,GAML,IA3CV,EA+CQ1D,KAAK,GACD,0CACI,oBAAC,KAAD;AAAO,IAAA,MAAM,EAAE;AAAEuB,MAAAA,GAAG,EAAEvB;AAAP,KAAf;AAA+B,IAAA,KAAK,EAAEuD,MAAM,CAACvD,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEuD,MAAM,CAACG,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADC,GAMC,IArDd,EAwDI,oBAAC,WAAD;AACI,IAAA,IAAI,EAAC,cADT;AAEI,IAAA,OAAO,EAAEL,yBAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxDJ,CADJ;AAgEH;AAED,IAAME,MAAM,GAAGQ,UAAU,CAACC,MAAX,CAAkB;AAC7BR,EAAAA,SAAS,EAAE;AACPS,IAAAA,eAAe,EAAE,MADV;AAEPC,IAAAA,SAAS,EAAE,EAFJ;AAGPC,IAAAA,iBAAiB,EAAE;AAHZ,GADkB;AAO7BV,EAAAA,KAAK,EAAE;AACHW,IAAAA,UAAU,EAAE,KADT;AAEHC,IAAAA,QAAQ,EAAE,EAFP;AAGHC,IAAAA,aAAa,EAAE,GAHZ;AAIHC,IAAAA,SAAS,EAAE;AAJR,GAPsB;AAc7BZ,EAAAA,KAAK,EAAE;AACHU,IAAAA,QAAQ,EAAE,EADP;AAEHG,IAAAA,UAAU,EAAE,EAFT;AAGHC,IAAAA,KAAK,EAAE,SAHJ;AAIHC,IAAAA,YAAY,EAAE;AAJX,GAdsB;AAqB7Bd,EAAAA,UAAU,EAAE;AACRS,IAAAA,QAAQ,EAAE,EADF;AAERM,IAAAA,WAAW,EAAE,CAFL;AAGRC,IAAAA,iBAAiB,EAAE,CAHX;AAIRC,IAAAA,iBAAiB,EAAE,SAJX;AAKRC,IAAAA,eAAe,EAAE;AALT,GArBiB;AA6B7BpB,EAAAA,OAAO,EAAE;AACLoB,IAAAA,eAAe,EAAE;AADZ,GA7BoB;AAiC7B9E,EAAAA,KAAK,EAAE;AACH+E,IAAAA,SAAS,EAAE,QADR;AAEHC,IAAAA,KAAK,EAAE,MAFJ;AAGHC,IAAAA,MAAM,EAAE;AAHL,GAjCsB;AAuC7BtC,EAAAA,OAAO,EAAE;AACL4B,IAAAA,SAAS,EAAE;AADN;AAvCoB,CAAlB,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { StyleSheet, Text, View, Platform, ScrollView, Image, TextInput, ActivityIndicator, Alert } from 'react-native';\nimport { Picker } from '@react-native-picker/picker';\nimport * as ImagePicker from 'expo-image-picker';\nimport BasicButton from \"./BasicButton\";\nimport firebase from 'firebase';\nimport storage from './FirebaseConfig';\n\nexport default function Media() {\n    const [image, setImage] = useState(null);\n    const [isUploading, setIsUploading] = useState(false);\n    const [percentUploaded, setPercentUploaded] = useState(\"\");\n    const [quizName, setQuizName] = useState(\"\");\n    const [quizType, setQuizType] = useState(\"\");\n\n    //component did mount\n    useEffect(() => {\n        //asking for permission to access phone's gallery\n        (async () => {\n            if (Platform.OS !== 'web') {\n                const { status } = await ImagePicker.requestCameraRollPermissionsAsync();\n                if (status !== 'granted') {\n                    alert('Sorry, we need camera roll permissions to make this work!');\n                }\n            }\n        })();\n    }, []);\n\n    //function to handle when Pick Image btn is clicked on\n    async function handlePickImgBtnClick() {\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\n            quality: 1,\n        });\n\n        if (!result.cancelled) {\n            setImage(result.uri);\n        }\n    }\n\n //function to upload the image in firebase\n async function uploadImage(uri) {\n    const timeStamp = Math.floor(Date.now() / 1000);\n    const imageName = timeStamp + \".jpg\";\n\n    const response = await fetch(uri);\n    const blob = await response.blob();\n\n    //putting image in firebase\n    const storageRef = storage.ref().child(\"image/\" + imageName);\n    const resp = storageRef.put(blob);\n    resp.on(\n        firebase.storage.TaskEvent.STATE_CHANGED,\n        snapshot => {\n            const percent = ((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n            console.log(\"percent\", percent);\n            setPercentUploaded(Math.floor(percent) + \" %\");\n        },\n        error => {\n            console.log(\"image upload error: \", error.message);\n            setPercentUploaded(\"\");\n        },\n        () => {\n            storageRef.getDownloadURL()\n                .then((downloadUrl) => {     \n                    setImage(downloadUrl);\n                    console.log(\"File available at:\", downloadUrl);\n                })\n        }\n    );\nreturn resp;\n}\n\n\n    //function to handle when submit quiz btn is pressed on\n    function handleUploadImageBtnClick() {\n        console.log(\"Upload Image btn pressed\", image);\n\n        if (image) {\n            setImage(\"\");\n            setIsUploading(true);\n\n            //saving image to firebase\n            uploadImage(image)\n                .then(() => {\n                    setIsUploading(false);\n                    console.log(\"Successful!\")\n                })\n                .catch((error) => {\n                    console.log(\"Fail to upload Image\", error);\n                    setIsUploading(false);\n                });\n        }\n    }\n\n\n    //component rendering\n    return (\n        <ScrollView style={styles.container}>\n            <Text style={styles.title}>Media Management</Text>\n            <View style={styles.divider}></View>\n\n            <Text style={styles.label}>Quiz Name</Text>\n            <TextInput\n                style={styles.inputField}\n                placeholder=\"Enter your name\"\n                value={quizName}\n                onChangeText={(name) => setQuizName(name)}\n            />\n            <View style={styles.divider}></View>\n\n            <Text style={styles.label}>Quiz Type</Text>\n            <Picker\n                style={styles.inputField}\n                selectedValue={quizType}\n                onValueChange={(quizType, itemIndex) => setQuizType(quizType)}\n            >\n                <Picker.Item label=\"\" value=\"\" />\n                <Picker.Item label=\"Maths Quiz\" value=\"Maths Quiz\" />\n                <Picker.Item label=\"Science Quiz\" value=\"Science Quiz\" />\n                <Picker.Item label=\"Sports Quiz\" value=\"Sports Quiz\" />\n                <Picker.Item label=\"English  Quiz\" value=\"English Quiz\" />\n                <Picker.Item label=\"Hindi Quiz\" value=\"Hindi Quiz\" />\n                <Picker.Item label=\"Technology Quiz\" value=\"Technology Quiz\" />\n                <Picker.Item label=\"Arts Quiz\" value=\"Arts Quiz\" />\n            </Picker>\n            <View style={styles.divider}></View>\n\n            <BasicButton\n                text=\"Pick Image\"\n                onPress={handlePickImgBtnClick}\n            />\n            <View style={styles.divider}></View>\n\n            {\n            isUploading ?\n             <>\n                 <ActivityIndicator />\n                 <Text style={styles.percent}>{percentUploaded}</Text>\n                 <View style={styles.divider}></View>\n             </>\n                : null\n            }\n           \n            {\n                image ?\n                    <>\n                        <Image source={{ uri: image }} style={styles.image} />\n                        <View style={styles.divider}></View>\n                    </>\n\n                    : null\n            }\n\n            <BasicButton\n                text=\"Upload Image\"\n                onPress={handleUploadImageBtnClick}\n            />\n            \n        </ScrollView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        backgroundColor: '#fff',\n        marginTop: 60,\n        paddingHorizontal: 30,\n    },\n\n    title: {\n        fontWeight: '500',\n        fontSize: 30,\n        letterSpacing: 0.1,\n        textAlign: \"center\",\n    },\n\n    label: {\n        fontSize: 16,\n        lineHeight: 18,\n        color: '#666666',\n        marginBottom: 3,\n    },\n\n    inputField: {\n        fontSize: 14,\n        borderWidth: 0,\n        borderBottomWidth: 1,\n        borderBottomColor: '#BFBFBF',\n        paddingVertical: 6,\n    },\n\n    divider: {\n        paddingVertical: 8,\n    },\n\n    image: {\n        alignSelf: \"center\",\n        width: \"100%\",\n        height: 200,\n    },\n\n    percent: {\n        textAlign: \"center\",\n    }\n});\n"]},"metadata":{},"sourceType":"module"}